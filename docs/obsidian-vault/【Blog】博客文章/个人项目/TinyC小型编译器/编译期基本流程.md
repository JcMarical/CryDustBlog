编译器的工作流程简要描述如下：

> 1. **词法分析**：对源文件进行扫描，将源文件的字符流拆分分一个个的词（记号），此为词法分析
> 2. **语法分析**：根据语法规则将这些记号构造出语法树，此为语法分析
> 3. **语义分析**：对语法树的各个节点之间的关系进行检查，检查语义规则是否被违背，同时对语法树进行必要的优化，此为语义分析
> 4. **中间代码生成**：遍历语法树的节点，将各节点转化为中间代码，并按特定的顺序拼装起来，此为中间代码生成
> 5. **中间代码优化**：对中间代码进行优化
> 6. **目标代码生成**：将中间代码转化为目标代码
> 7. **目标代码优化**：对目标代码进行优化，生成最终的目标程序




# 优化

## **中间代码优化**
在本阶段，编译器对中间代码进行优化，尝试生成体积最小、最快、最有效率的代码。常见的优化方法有：

- 去除**永远都不会被执行的代码区**
- 去掉**未被使用到的变量**
- **优化循环体**，将每次循环中的运行结果不变的语句移到循环的最外面
- **算术表达式优化**，将乘 1 和 加 0 等操作去掉，将乘 2 优化成左移 1 位等


## **目标代码优化**
本阶段，编译器利用目标机器的提供的特性对目标代码做进一步的优化，**如利用 CPU 的流水线，利用 CPU 的多核等，生成最终的目标代码**


